---
import BaseLayout from "../layouts/BaseLayout.astro";
import HorizontalCard from "../components/HorizontalCard.astro";
import { getCollection } from "astro:content";
import createSlug from "../lib/createSlug"

const posts = (await getCollection("blog")).sort((a, b) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf());

const last_posts = posts.slice(0, 3);
---

<BaseLayout sideBarActiveItemID="home">
  <div class="pb-12 mt-5">
    <div class="text-xl py-1">Hey there ðŸ‘‹</div>
    <div class="text-5xl font-bold">I'm Abhishek Singh</div>
    <div class="text-3xl py-3 font-bold">Software Developer & Tech Enthusiast</div>
    <div class="py-2">
      <text class="text-lg">
        Welcome to my personal portfolio! I'm passionate about building innovative solutions and exploring new technologies.
        Here you'll find my latest projects, blog posts, and professional experience. Feel free to explore and get in touch!
      </text>
    </div>
    <div class="mt-8">
      <a class="btn" href="https://github.com/ABHISHEK0S1INGH" target="_blank"> Check out my GitHub</a>
      <a href="mailto:contact@example.com" class="btn btn-outline ml-5">
        Get in Touch
      </a>
    </div>
  </div>

  <div>
    <div class="text-3xl w-full font-bold mb-2">My last projects {"</>"}</div>
  </div>

  <HorizontalCard
    title="Personal Portfolio Website"
    img="/post_img.webp"
    desc="A modern, responsive portfolio website built with Astro and TailwindCSS. Features include a blog, project showcase, CV section, and more."
    url="#"
    badge="NEW"
  />
  <div class="divider my-0"></div>
  <HorizontalCard
    title="Web Application Project"
    img="/post_img.webp"
    desc="An innovative web application showcasing modern development practices and responsive design principles."
    url="#"
  />
  <div class="divider my-0"></div>
  <HorizontalCard
    title="Open Source Contribution"
    img="/post_img.webp"
    desc="Contributing to open source projects and building tools for the developer community."
    url="#"
    badge="FOSS"
  />

  <div>
    <div class="text-3xl w-full font-bold mb-5 mt-10">Latest from blog</div>
  </div>

  {
    last_posts.map((post) => (
      <>
        <HorizontalCard
          title={post.data.title}
          img={post.data.heroImage}
          desc={post.data.description}
          url={"/blog/" + createSlug(post.data.title, post.slug)}
          target="_self"
          badge={post.data.badge}
        />
        <div class="divider my-0" />
      </>
    ))
  }
</BaseLayout>
